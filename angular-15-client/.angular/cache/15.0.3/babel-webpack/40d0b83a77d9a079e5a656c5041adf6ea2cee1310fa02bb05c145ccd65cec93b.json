{"ast":null,"code":"\"use strict\";\n\nimport aes from \"aes-js\";\nimport { getAddress } from \"@ethersproject/address\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { pbkdf2 } from \"@ethersproject/pbkdf2\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\nimport { Description } from \"@ethersproject/properties\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { getPassword, looseArrayify, searchPath } from \"./utils\";\nexport class CrowdsaleAccount extends Description {\n  isCrowdsaleAccount(value) {\n    return !!(value && value._isCrowdsaleAccount);\n  }\n}\n// See: https://github.com/ethereum/pyethsaletool\nexport function decrypt(json, password) {\n  const data = JSON.parse(json);\n  password = getPassword(password);\n  // Ethereum Address\n  const ethaddr = getAddress(searchPath(data, \"ethaddr\"));\n  // Encrypted Seed\n  const encseed = looseArrayify(searchPath(data, \"encseed\"));\n  if (!encseed || encseed.length % 16 !== 0) {\n    logger.throwArgumentError(\"invalid encseed\", \"json\", json);\n  }\n  const key = arrayify(pbkdf2(password, password, 2000, 32, \"sha256\")).slice(0, 16);\n  const iv = encseed.slice(0, 16);\n  const encryptedSeed = encseed.slice(16);\n  // Decrypt the seed\n  const aesCbc = new aes.ModeOfOperation.cbc(key, iv);\n  const seed = aes.padding.pkcs7.strip(arrayify(aesCbc.decrypt(encryptedSeed)));\n  // This wallet format is weird... Convert the binary encoded hex to a string.\n  let seedHex = \"\";\n  for (let i = 0; i < seed.length; i++) {\n    seedHex += String.fromCharCode(seed[i]);\n  }\n  const seedHexBytes = toUtf8Bytes(seedHex);\n  const privateKey = keccak256(seedHexBytes);\n  return new CrowdsaleAccount({\n    _isCrowdsaleAccount: true,\n    address: ethaddr,\n    privateKey: privateKey\n  });\n}","map":{"version":3,"names":["aes","getAddress","arrayify","keccak256","pbkdf2","toUtf8Bytes","Description","Logger","version","logger","getPassword","looseArrayify","searchPath","CrowdsaleAccount","isCrowdsaleAccount","value","_isCrowdsaleAccount","decrypt","json","password","data","JSON","parse","ethaddr","encseed","length","throwArgumentError","key","slice","iv","encryptedSeed","aesCbc","ModeOfOperation","cbc","seed","padding","pkcs7","strip","seedHex","i","String","fromCharCode","seedHexBytes","privateKey","address"],"sources":["F:/DDesktop/MEAN_BC/mean-stack-authentication-authorization-master/angular-15-client/node_modules/@ethersproject/json-wallets/lib.esm/crowdsale.js"],"sourcesContent":["\"use strict\";\nimport aes from \"aes-js\";\nimport { getAddress } from \"@ethersproject/address\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { pbkdf2 } from \"@ethersproject/pbkdf2\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\nimport { Description } from \"@ethersproject/properties\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\nimport { getPassword, looseArrayify, searchPath } from \"./utils\";\nexport class CrowdsaleAccount extends Description {\n    isCrowdsaleAccount(value) {\n        return !!(value && value._isCrowdsaleAccount);\n    }\n}\n// See: https://github.com/ethereum/pyethsaletool\nexport function decrypt(json, password) {\n    const data = JSON.parse(json);\n    password = getPassword(password);\n    // Ethereum Address\n    const ethaddr = getAddress(searchPath(data, \"ethaddr\"));\n    // Encrypted Seed\n    const encseed = looseArrayify(searchPath(data, \"encseed\"));\n    if (!encseed || (encseed.length % 16) !== 0) {\n        logger.throwArgumentError(\"invalid encseed\", \"json\", json);\n    }\n    const key = arrayify(pbkdf2(password, password, 2000, 32, \"sha256\")).slice(0, 16);\n    const iv = encseed.slice(0, 16);\n    const encryptedSeed = encseed.slice(16);\n    // Decrypt the seed\n    const aesCbc = new aes.ModeOfOperation.cbc(key, iv);\n    const seed = aes.padding.pkcs7.strip(arrayify(aesCbc.decrypt(encryptedSeed)));\n    // This wallet format is weird... Convert the binary encoded hex to a string.\n    let seedHex = \"\";\n    for (let i = 0; i < seed.length; i++) {\n        seedHex += String.fromCharCode(seed[i]);\n    }\n    const seedHexBytes = toUtf8Bytes(seedHex);\n    const privateKey = keccak256(seedHexBytes);\n    return new CrowdsaleAccount({\n        _isCrowdsaleAccount: true,\n        address: ethaddr,\n        privateKey: privateKey\n    });\n}\n"],"mappings":"AAAA,YAAY;;AACZ,OAAOA,GAAG,MAAM,QAAQ;AACxB,SAASC,UAAU,QAAQ,wBAAwB;AACnD,SAASC,QAAQ,QAAQ,sBAAsB;AAC/C,SAASC,SAAS,QAAQ,0BAA0B;AACpD,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,WAAW,QAAQ,2BAA2B;AACvD,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,OAAO,QAAQ,YAAY;AACpC,MAAMC,MAAM,GAAG,IAAIF,MAAM,CAACC,OAAO,CAAC;AAClC,SAASE,WAAW,EAAEC,aAAa,EAAEC,UAAU,QAAQ,SAAS;AAChE,OAAO,MAAMC,gBAAgB,SAASP,WAAW,CAAC;EAC9CQ,kBAAkB,CAACC,KAAK,EAAE;IACtB,OAAO,CAAC,EAAEA,KAAK,IAAIA,KAAK,CAACC,mBAAmB,CAAC;EACjD;AACJ;AACA;AACA,OAAO,SAASC,OAAO,CAACC,IAAI,EAAEC,QAAQ,EAAE;EACpC,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;EAC7BC,QAAQ,GAAGT,WAAW,CAACS,QAAQ,CAAC;EAChC;EACA,MAAMI,OAAO,GAAGtB,UAAU,CAACW,UAAU,CAACQ,IAAI,EAAE,SAAS,CAAC,CAAC;EACvD;EACA,MAAMI,OAAO,GAAGb,aAAa,CAACC,UAAU,CAACQ,IAAI,EAAE,SAAS,CAAC,CAAC;EAC1D,IAAI,CAACI,OAAO,IAAKA,OAAO,CAACC,MAAM,GAAG,EAAE,KAAM,CAAC,EAAE;IACzChB,MAAM,CAACiB,kBAAkB,CAAC,iBAAiB,EAAE,MAAM,EAAER,IAAI,CAAC;EAC9D;EACA,MAAMS,GAAG,GAAGzB,QAAQ,CAACE,MAAM,CAACe,QAAQ,EAAEA,QAAQ,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC,CAACS,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;EACjF,MAAMC,EAAE,GAAGL,OAAO,CAACI,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;EAC/B,MAAME,aAAa,GAAGN,OAAO,CAACI,KAAK,CAAC,EAAE,CAAC;EACvC;EACA,MAAMG,MAAM,GAAG,IAAI/B,GAAG,CAACgC,eAAe,CAACC,GAAG,CAACN,GAAG,EAAEE,EAAE,CAAC;EACnD,MAAMK,IAAI,GAAGlC,GAAG,CAACmC,OAAO,CAACC,KAAK,CAACC,KAAK,CAACnC,QAAQ,CAAC6B,MAAM,CAACd,OAAO,CAACa,aAAa,CAAC,CAAC,CAAC;EAC7E;EACA,IAAIQ,OAAO,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,IAAI,CAACT,MAAM,EAAEc,CAAC,EAAE,EAAE;IAClCD,OAAO,IAAIE,MAAM,CAACC,YAAY,CAACP,IAAI,CAACK,CAAC,CAAC,CAAC;EAC3C;EACA,MAAMG,YAAY,GAAGrC,WAAW,CAACiC,OAAO,CAAC;EACzC,MAAMK,UAAU,GAAGxC,SAAS,CAACuC,YAAY,CAAC;EAC1C,OAAO,IAAI7B,gBAAgB,CAAC;IACxBG,mBAAmB,EAAE,IAAI;IACzB4B,OAAO,EAAErB,OAAO;IAChBoB,UAAU,EAAEA;EAChB,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}